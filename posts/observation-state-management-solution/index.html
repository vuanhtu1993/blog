<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/blog/component---src-templates-post-template-jsx.ae6844d027271e0d4807.css">/*! normalize.css v5.0.0 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,footer,header,nav,section{display:block}h1{font-size:2em;margin:.67em 0}figcaption,figure,main{display:block}figure{margin:1em 2.5rem}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}dfn{font-style:italic}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}img{border-style:none}svg:not(:root){overflow:hidden}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 .125rem;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{display:inline-block;vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details,menu{display:block}summary{display:list-item}canvas{display:inline-block}[hidden],template{display:none}html{font-size:100}body{color:#222;line-height:1.625;font-size:1rem;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body,h1,h2,h3,h4,h5,h6{font-family:Roboto,Helvetica Neue,Helvetica,Arial,sans-serif}h1,h2,h3,h4,h5,h6{font-weight:500}h1{font-size:2.5rem;line-height:3.25rem;margin-top:6.5rem;margin-bottom:1.625rem}h2{font-size:1.6875rem;line-height:2.4375rem}h2,h3{margin-top:3.25rem;margin-bottom:.8125rem}h3{font-size:1.375rem;line-height:1.625rem}h4{font-size:1.2rem;margin-top:2.4375rem}h4,h5{line-height:1.625rem;margin-bottom:.8125rem}h5,h6{font-size:1rem;margin-top:4.0625rem}h6{line-height:1.625rem;margin-bottom:.8125rem}img{max-width:100%;margin:inherit auto}hr,img{border:0;display:block}hr{color:#222;height:26px;margin:3.25rem auto;background-size:100% 26px;background-image:linear-gradient(180deg,transparent 1px,transparent 11px,#222 0,#222 15px,transparent 0,transparent 26px);width:6.25rem}a{color:#5d93ff;text-decoration:none}a:active,a:focus,a:hover{color:#f7a046}b,strong{font-weight:500}ul{list-style:square;margin-bottom:1.625rem}ul li{padding:0 .3125rem;margin-bottom:.625rem}p{line-height:1.625rem;margin-bottom:1.625rem}blockquote{padding:0;font-style:italic;text-align:center}figure{display:block;width:100%;height:auto}figcaption{line-height:1.21875rem;margin-top:.40625rem;color:#222;font-size:.875rem;font-style:italic;margin-bottom:0;text-align:center}.layout{max-width:66.875rem;margin-left:auto;margin-right:auto}.layout:after,.layout:before{content:"";display:table}.layout:after{clear:both}.content__inner{padding:1.5625rem 1.25rem}@media screen and (min-width:685px){figure.float-left,figure.float-right{max-width:19.375rem;padding:0 1.625rem}.float-right{float:right}.float-left{float:left}.content{width:calc(58.275% - .78125rem)}.content:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.content:last-child{margin-right:0}.content:nth-child(12n){margin-right:0;float:right}.content:nth-child(12n+1){clear:both}.content__inner{padding:1.875rem 1.25rem}}@media screen and (min-width:960px){.content{width:calc(66.6% - .625rem)}.content:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.content:last-child{margin-right:0}.content:nth-child(3n){margin-right:0;float:right}.content:nth-child(3n+1){clear:both}.content__inner{padding:2.5rem 2.1875rem}}code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.tags__list-item-link{color:#222}.tags__list-item-link:focus,.tags__list-item-link:hover{color:#5d93ff;border-bottom:1px solid #5d93ff}.categories__list-item-link{color:#222}.categories__list-item-link:focus,.categories__list-item-link:hover{color:#5d93ff;border-bottom:1px solid #5d93ff}.post-single__inner{max-width:59.0625rem;padding:0 .9375rem;margin:0 auto}.post-single__title{font-size:2rem;max-width:40rem;font-weight:600;text-align:center;line-height:2.68125rem;margin:1.625rem auto 0}.post-single__body figure{margin-bottom:1.625rem}.post-single__body figure blockquote{font-style:italic;text-align:center;margin-top:0;padding:1.625rem 0}.post-single__body figure blockquote p{max-width:40rem;font-size:1.6817rem;margin-top:0;margin-bottom:1.625rem;line-height:2.4375rem}.post-single__body a{text-decoration:underline}.post-single__body .gatsby-highlight{max-width:40rem;margin-left:.9375rem;margin-right:.9375rem;margin-bottom:1.625rem}.post-single__body :not(div){max-width:40rem;margin-left:auto;margin-right:auto}.post-single__footer{max-width:40rem;line-height:1.625rem;margin:1.625rem .9375rem 3.25rem}.post-single__footer-text a{text-decoration:underline}.post-single__date{max-width:40rem;margin-left:auto;margin-right:auto}.post-single__tags{margin-bottom:.8125rem}.post-single__tags-list{list-style:none;margin:0 -.3125rem;padding:0}.post-single__tags-list-item{display:inline-block;margin:.625rem .3125rem}.post-single__tags-list-item-link{background:#ebebeb;text-decoration:none;border:0;border-radius:.1875rem;color:#555;line-height:1.625;padding:.5rem 1rem}.post-single__tags-list-item-link:focus,.post-single__tags-list-item-link:hover{color:#222;background:#dfdfdf;border:0}.post-single__home-button{display:block;margin-left:auto;margin-right:auto;max-width:5.625rem;font-size:1rem;padding:0 1rem;height:35px;line-height:2.1875rem;text-align:center;color:#555;background:#ebebeb;font-weight:400;border-radius:.1875rem;margin-top:1.625rem}.post-single__home-button:focus,.post-single__home-button:hover{color:#222;background:#dfdfdf;border:0}@media screen and (min-width:685px){.post-single__body .gatsby-highlight,.post-single__footer{margin-left:auto;margin-right:auto}}@media screen and (min-width:960px){.post-single__inner{padding:0}.post-single__title{font-size:3rem;line-height:3.65625rem;margin-top:3.65625rem;margin-bottom:2.4375rem}.post-single__body,.post-single__body p{font-size:1.125rem;line-height:1.82813rem;margin-bottom:1.82813rem}.post-single__home-button{position:fixed;max-width:auto;margin:0;top:30px;left:30px}}</style><meta name="generator" content="Gatsby 2.0.78"/><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml"/><link href="https://fonts.googleapis.com/css?family=Roboto:400,400i,500,700" rel="stylesheet"/><link rel="sitemap" type="application/xml" href="/blog/sitemap.xml"/><title data-react-helmet="true">Introduction Observation state management solution - Blog by AnhTus</title><meta data-react-helmet="true" name="description" content="New approach for state management using observer pattern"/><link as="script" rel="preload" href="/blog/component---src-templates-post-template-jsx-5e8836b8372482c00ace.js"/><link as="script" rel="preload" href="/blog/app-a1eb35dcfa467850ea77.js"/><link as="script" rel="preload" href="/blog/3-e46ddceed530e2548735.js"/><link as="script" rel="preload" href="/blog/0-df783419e7299b1afa44.js"/><link as="script" rel="preload" href="/blog/webpack-runtime-26ee0fdbdc62f582b7ea.js"/><link as="fetch" rel="preload" href="/blog/static/d/264/path---posts-observation-state-management-solution-370-351-qsKZrdIjFkLxhbpO3cl7pQMrF5Q.json" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div class="layout"><div><div><div><a class="post-single__home-button" href="/blog/">All Articles</a></div><div class="post-single"><div class="post-single__inner"><h1 class="post-single__title">Introduction Observation state management solution</h1><div class="post-single__body"><h3>Introduction Observation state management solution:</h3>
<ul>
<li>Lấy cảm hứng từ ý tưởng <code class="language-text">Observer pattern</code> cùng việc học hỏi theo một trainer(FOZG) của mình tại FPT
đã viết một công cụ có thể làm việc như là một thư viện quản lí trạng thái.</li>
<li>Trong dự án tôi sử dụng 2 pattern chính là <code class="language-text">Observer Pattern</code> và <code class="language-text">Singleton Pattern</code>, trong một bài viết khác
mình sẽ đề cấp đến một số pattern được sử dụng rất nhiều trong các dự án Javascript</li>
</ul>
<h4>Observer Pattern:</h4>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/blog/static/c700645a0456b0a68d3896ebf449e4b5/75abe/observation-pattern.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 825px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 41.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABR0lEQVQoz31SW4uCYBT8/v9vSQh6CPIhH7WHJLoodtWILC+ppWW3WeawLrEsO3A4fJ7PcWaOCt94v9/Sq6rC4XBAkiTI8xyPxwP3+1367XbDdDrFYrGAbdtot9swDAPb7Rae5yGOY6iG8PV6SV+tVmi1Wuh2uxgOhyjLUojP5zOiKIJlWRgMBjBNU/poNILruliv18iyDKpR1vTL5YLZbCZ1vV7xG5vNRlSOx2M4joPdbof9fo8wDOVd9UnWoK5rUfQJ3nk+n6KWcaRpKkS0yWen00ncqMYqCXiRsmnteDzKRXZeJJgt8/J9X5RxVhSFvMPO80+GlPsXuAgqJqiKGU8mE8ltPp/LgmiXZJyr5XKJIAgkEw555oBWqITbIwGzIwnV8ONURFd0QQdNKU3T0Ov1pPr9PnRdFxJur9PpyJnF34NzKv4PXxV1VSVTDPOcAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="alt text"
        title=""
        src="/blog/static/c700645a0456b0a68d3896ebf449e4b5/75abe/observation-pattern.png"
        srcset="/blog/static/c700645a0456b0a68d3896ebf449e4b5/0db43/observation-pattern.png 240w,
/blog/static/c700645a0456b0a68d3896ebf449e4b5/cf4ee/observation-pattern.png 480w,
/blog/static/c700645a0456b0a68d3896ebf449e4b5/75abe/observation-pattern.png 825w"
        sizes="(max-width: 825px) 100vw, 825px"
      />
    </span>
  </span>
  
  </a>
    </p>
<ul>
<li>Như được biểu diễn trong sơ đồ UML, các đối tượng cần thiết là subject, observer và các đối tượng cụ thể.
Subject có chứa tham chiếu đến các observers cụ thể để thông báo cho bất kỳ thay đổi.
Đối tượng Observer là một lớp trừu tượng cho phép các observers cụ thể thực hiện phương thức thông báo</li>
</ul>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">let</span> <span class="token function-variable function">Subject</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Một stack các observers subscribe Subject</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>observers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    subscribeObserver<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    unsubscribeObserver<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>index <span class="token operator">></span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    notifyObserver<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>index <span class="token operator">></span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    notifyAllObservers<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>observers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token function-variable function">Observer</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    notify<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Observer "</span> <span class="token operator">+</span> index <span class="token operator">+</span> <span class="token string">" is notified!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> subject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Subject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> observer1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Observer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> observer2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Observer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> observer3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Observer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> observer4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Observer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

subject<span class="token punctuation">.</span><span class="token function">subscribeObserver</span><span class="token punctuation">(</span>observer1<span class="token punctuation">)</span><span class="token punctuation">;</span>
subject<span class="token punctuation">.</span><span class="token function">subscribeObserver</span><span class="token punctuation">(</span>observer2<span class="token punctuation">)</span><span class="token punctuation">;</span>
subject<span class="token punctuation">.</span><span class="token function">subscribeObserver</span><span class="token punctuation">(</span>observer3<span class="token punctuation">)</span><span class="token punctuation">;</span>
subject<span class="token punctuation">.</span><span class="token function">subscribeObserver</span><span class="token punctuation">(</span>observer4<span class="token punctuation">)</span><span class="token punctuation">;</span>

subject<span class="token punctuation">.</span><span class="token function">notifyObserver</span><span class="token punctuation">(</span>observer2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Observer 2 is notified!</span>

subject<span class="token punctuation">.</span><span class="token function">notifyAllObservers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Observer 1 is notified!</span>
<span class="token comment">// Observer 2 is notified!</span>
<span class="token comment">// Observer 3 is notified!</span>
<span class="token comment">// Observer 4 is notified!</span></code></pre></div>
<ul>
<li>
<p>Tư tưởng chính: ta xây dựng một nơi quản lí state tập trung của cả dự án gọi là <code class="language-text">Store</code>,
tại đây dự liệu sẽ được cập nhật => báo cho các <code class="language-text">component</code> <code class="language-text">subscribe</code> <code class="language-text">Store</code> biết là đã có sự thay đổi
store và hãy render lại đi (đã có dữ liệu mới rồi)</p>
</li>
<li>
<p>Implement thế nào?
Từ ý tưởng và khi implement là cả môt sự khác biết rất lớn:</p>
</li>
<li>
<p>Đầu tiên là vấn đề <code class="language-text">Store</code> (Ở đây là ứng với Subject): Nơi lưu trữ dữ liệu, subscribe component và update dữ liệu
Nhưng mà vấn đề ở chỗ là không thể cứ component nào cũng tạo ra một Store được vì như thế còn gì là
quản lí tập trung nữa. Điều này làm ta phải nghĩ ngay đến Singleton Pattern :))))
Khó càng thêm khó => Lại thêm một pattern nữa mình băn khoăn (Xem định nghĩa ở dưới nhé)
Có thể hiểu là mình cần phải tạo một object (đóng vai trò như là Singleton), tạo một lần
dùng mãi mãi :))))
Tạm thời tắc tịt ở đây !!!</p>
</li>
<li>
<p>Bây là vấn đề Observer: Cái gì là đóng vai trò thông báo cho component biết khi nào cần phải render
lại ???. Câu trả lời là: hàm setState của HOC chứa component => Vì khi hàm setState này được
trigger thì component subscribe (HOC) sẽ được render lại => Component chính được render lại</p>
</li>
<li>
<p>Ngon rồi, đã clear hơn một chút về phần subscribe và render lại => Tuy nhiên vấn đề 1
thì còn nan giải. Vậy là cần phải tạo một <code class="language-text">instance</code> của <code class="language-text">Store</code> tổng để import vào HOC => Một cách
để tạo ra Singleton.</p>
</li>
</ul>
<p>Nhưng mình đang cần phải tạo ra nhiều Store để phục vụ các ứng dựng rỉêng => Giống redux nên thay vì tạo
singleton là Store ta sẽ tạo <code class="language-text">singleton</code> là các Observation chứ hàm connect HOC với component </p>
<p>Chi tiết code xem tại đây: <a href="https://github.com/vuanhtu1993/observation-state">https://github.com/vuanhtu1993/observation-state</a></p>
<h4>Singleton Pattern</h4></div><div class="post-single__date"><em>Published <!-- -->9 May 2019</em></div></div><div class="post-single__footer"><div class="post-single__tags"><ul class="post-single__tags-list"><li class="post-single__tags-list-item"><a class="post-single__tags-list-item-link" href="/blog/tags/react/">React</a></li><li class="post-single__tags-list-item"><a class="post-single__tags-list-item-link" href="/blog/tags/state-management/">State management</a></li><li class="post-single__tags-list-item"><a class="post-single__tags-list-item-link" href="/blog/tags/observation-state/">Observation state</a></li></ul></div><hr/><p class="post-single__footer-text">Imagination more important than knowledge. Knowledge is limited. Imagination encircles the world
      
      from &quot;Albert Einstein&quot;
      <a href="https://github.com/vuanhtu1993" target="_blank" rel="noopener noreferrer"><br/> <strong>Vu Anh Tu</strong> on Github</a></p><div><div><div id="disqus_thread"></div></div></div></div></div></div></div></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-73379983-2', 'auto', {});
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-post-template-jsx","jsonName":"posts-observation-state-management-solution-370","path":"/posts/observation-state-management-solution/"};window.dataPath="264/path---posts-observation-state-management-solution-370-351-qsKZrdIjFkLxhbpO3cl7pQMrF5Q";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-a1eb35dcfa467850ea77.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-cf314d16f68ddd8e82ad.js"],"component---src-templates-post-template-jsx":["/component---src-templates-post-template-jsx.ae6844d027271e0d4807.css","/component---src-templates-post-template-jsx-5e8836b8372482c00ace.js"],"component---src-templates-tag-template-jsx":["/component---src-templates-tag-template-jsx.cc7a98d1e2274506d081.css","/component---src-templates-tag-template-jsx-7b932d4244fd42af2fe7.js"],"component---src-templates-category-template-jsx":["/component---src-templates-category-template-jsx.cc7a98d1e2274506d081.css","/component---src-templates-category-template-jsx-6b9289edb29eff475f3b.js"],"component---src-templates-page-template-jsx":["/component---src-templates-page-template-jsx.9197ae8e172ca69c580f.css","/component---src-templates-page-template-jsx-0da04fa75e99d758f1a4.js"],"component---src-pages-404-jsx":["/component---src-pages-404-jsx-4b98d6662bbc0cfa352b.js"],"component---src-pages-categories-jsx":["/component---src-pages-categories-jsx-a7f3e83defbdc34493c9.js"],"component---src-pages-index-jsx":["/component---src-pages-index-jsx.cc7a98d1e2274506d081.css","/component---src-pages-index-jsx-e77a20bf7616f0a058b8.js"],"component---src-pages-tags-jsx":["/component---src-pages-tags-jsx-d599fda71921e9963dff.js"],"pages-manifest":["/pages-manifest-af459f8f8f2ea0a5dab8.js"]};/*]]>*/</script><script src="/blog/webpack-runtime-26ee0fdbdc62f582b7ea.js" async=""></script><script src="/blog/0-df783419e7299b1afa44.js" async=""></script><script src="/blog/3-e46ddceed530e2548735.js" async=""></script><script src="/blog/app-a1eb35dcfa467850ea77.js" async=""></script><script src="/blog/component---src-templates-post-template-jsx-5e8836b8372482c00ace.js" async=""></script></body></html>